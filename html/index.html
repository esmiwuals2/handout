<HTML>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/milligram.css">
  <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">

  <style>
    td {

    }
  </style>

  <title>Funding HNS Development</title>
</head>
<body>
  <div class="container">
    <br>

    <div style="text-align:center">
      <h1>Contribute to Handshake development</h1>
      <br>

      <h4>
        Progress:<br>
        <span id="grandtotal"></span> of $150,000 total goal (<span id="totalpct"></span>%)
      </h4>
      <div id="progress-container" style="height:50px;width:100%;border:2px solid black;border-radius:10px">
        <div id="progress" style="border-radius:10px;height:100%;background-color:#17cf86;width:0%"></div>
      </div><br>

      <h3>
        <a href="https://github.com/pinheadmz">
          Engineer: Matthew Zipkin (pinheadmz)
          <img src="img/github.png" style="height:1em;vertical-align:middle">
        </a>
      </h3>
      <br>

      <h3>
        <a href="https://gist.github.com/pinheadmz/96dab51ba9ff9c0b05accd4786f8f7bb">
          Review the 12-month development proposal
        </a>
      </h3>
      <br>

      <hr>
      <h3>
        <a href="https://github.com/sponsors/pinheadmz">
          Donate $USD monthly with GitHub Sponsors
          <br>
          <img src="img/paymentoptions.png">
        </a>
      </h3>

      <h4>Current GitHub Sponsors:</h4>
      <div id="sponsors" style="max-width:700px;margin:auto"></div>
    </div><br>

    <hr>
    <div style="text-align: center">
      <h3>
        Send direct payment:
      </h3>
      <a href="https://paypal.me/pinheadmz">
        <img src="img/paypal.png" style="vertical-align: middle"> &nbsp;&nbsp; https://paypal.me/pinheadmz
      </a>
      <br><br>
      <img src="img/zelle.png" style="vertical-align: middle"> &nbsp;&nbsp; pinheadmz@gmail.com
      <br><br>
      <img src="img/usdt.png" style="vertical-align: middle"> &nbsp;&nbsp; USDT (ERC20): <span style="font-family:monospace;font-weight:bold">0xae7ffc3149dfc4fa2d07af2ef5cd679d85e69b10</span>
      <br><br>
      <a href="mailto:pinheadmz@gmail.com">Email pinheadmz@gmail.com for additional options</a>
      <br>
      <div style="text-align:center">
        <h4>Direct Donations received:</h4>
        <div id="direct" style="max-width:700px;margin:auto">
          <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Namebase</td>
                <td>$10,000</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <hr>
    <div style="text-align: center">
      <hr style="border: 1px solid white">
      <h3>Donate Bitcoin or Handshake:</h3>
      <a href="sigs.txt"><strong>These addresses are signed</strong></a>
      <br><br>
      BTC: bc1qq4hhuusn3m8fzd47w3tjvltvr9klv88rpt6ssq
      <div>
        <img src="img/bitcoinlogo.png" height="180px">
        <img src="img/btc.png">
      </div>
      <hr style="border: 1px solid white">
      HNS: hs1qde7jaw6qgzzfu83upn3twvsyhh0zrshg76qe0x
      <div>
        <img src="img/hns.png">
        <img src="img/handshakelogo.png" height="180px">
      </div>
    </div>

    <div style="text-align:center">
      <h4>Donations received:</h4>
      <div id="list" style="max-width:700px;margin:auto"></div>
    </div>

  </div>
</body>

<script>
let grandtotalusd = 10000;
window.onload = function() {
  getList();
  getSponsors();
}

function updateGrandTotal() {
  document.getElementById('grandtotal').innerHTML = '$' + grandtotalusd.toFixed(2);
  const pct = ((grandtotalusd / 150000) * 100).toFixed(1);
  document.getElementById('totalpct').innerHTML = pct;
  document.getElementById('progress').style.width = pct + '%';
}

function getList() {
  const http = new XMLHttpRequest();
  const url = 'list';

  http.open('get', url, true);

  http.onreadystatechange = function() {
    let totalbtc = 0;
    let totalhns = 0;
    let totalusd = 0;
    if (http.readyState === 4) {
      if (http.status === 200) {
        const data = JSON.parse(http.response);

        let table = `
          <table>
            <thead>
              <tr>
                <th>Date</th>
                <th>txid</th>
                <th>BTC</th>
                <th>HNS</th>
                <th>USD</th>
              </tr>
            </thead>
            <tbody>`;

        for (const item of data) {
          totalbtc += item.btc ? item.btc : 0;
          totalhns += item.hns ? item.hns : 0;
          totalusd += item.usd ? item.usd : 0;
          table += `
              <tr>
                <td>${item.date}</td>
                <td style="font-family:monospace;min-width:16em;width:16em;word-break:break-word">${item.txid}</td>
                <td>${item.btc ? item.btc.toFixed(8) : ''}</td>
                <td>${item.hns ? item.hns.toFixed(6) : ''}</td>
                <td>$${item.usd.toFixed(2)}</td>
              </tr>`;
        }

        table += `
            <tr>
              <td></td>
              <td><strong>TOTALS:</strong></td>
              <td><strong>${totalbtc.toFixed(8)}</strong></td>
              <td><strong>${totalhns.toFixed(6)}</strong></td>
              <td><strong>$${totalusd.toFixed(2)}</strong></td>
            </tr>`;

        table += `
            </tbody>
          </table>`;

        document.getElementById('list').innerHTML = table;
        grandtotalusd += parseFloat(totalusd.toFixed(2));
        updateGrandTotal();
      } else {
        console.error(http.response);
      }
    }
  };

  http.send();
};

function getSponsors() {
  const http = new XMLHttpRequest();
  const url = 'sponsors';

  http.open('get', url, true);

  http.onreadystatechange = function() {
    let totalusd = 0;
    if (http.readyState === 4) {
      if (http.status === 200) {
        const data = JSON.parse(http.response);

        let table = `
          <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>Tier</th>
              </tr>
            </thead>
            <tbody>`;

        for (const item of data) {
          totalusd += item.amount;
          table += `
              <tr>
                <td>${item.name}</td>
                <td>$${item.amount}</td>
              </tr>`;
        }

        table += `
            <tr>
              <td><strong>TOTAL:</strong></td>
              <td><strong>$${totalusd} / Month</strong></td>
            </tr>`;

        table += `
            </tbody>
          </table>`;

        document.getElementById('sponsors').innerHTML = table;
        grandtotalusd += totalusd * 12;
        updateGrandTotal();
      } else {
        console.error(http.response);
      }
    }
  };

  http.send();
};
</script>


